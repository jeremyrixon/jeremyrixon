<!doctype html>
<html>
<head>
    <meta charset="utf8"/>
    <title>Pokemon Red</title>
</head>
<body>

<div id="container">
    <div class="canvas-container"><canvas id="canvas"></canvas></div>
</div>

<table>
    <tr>
        <td></td>
        <td><button id="UP">UP</button></td>
        <td></td>
    </tr>
    <tr>
        <td><button id="LEFT">LEFT</button></td>
        <td></td>
        <td><button id="RIGHT">RIGHT</button></td>
    </tr>
    <tr>
        <td></td>
        <td><button id="DOWN">DOWN</button></td>
        <td></td>
    </tr>
    <tr>
        <td><button id="A">A</button></td>
        <td></td>
        <td><button id="SELECT">SELECT</button></td>
    </tr>
    <tr>
        <td><button id="B">B</button></td>
        <td></td>
        <td><button id="START">START</button></td>
    </tr>
</table>

<script type="text/javascript" src="gameboy.js"></script>

<script type="text/javascript">

    var romAjaxReader = new GameboyJS.RomAjaxReader();

    var Keyboard = function() {};

    Keyboard.prototype.init = function(onPress, onRelease) {
        this.onPress = onPress;
        this.onRelease = onRelease;

        document.getElementById("A").addEventListener("touchstart", _ => onPress("A"));
        document.getElementById("A").addEventListener("touchend", _ => onRelease("A"));

        document.getElementById("B").addEventListener("mousedown", _ => onPress("B"));
        document.getElementById("B").addEventListener("mouseup", _ => onRelease("B"));

        document.getElementById("SELECT").addEventListener("mousedown", _ => onPress("SELECT"));
        document.getElementById("SELECT").addEventListener("mouseup", _ => onRelease("SELECT"));

        document.getElementById("START").addEventListener("mousedown", _ => onPress("START"));
        document.getElementById("START").addEventListener("mouseup", _ => onRelease("START"));

        document.getElementById("LEFT").addEventListener("mousedown", _ => onPress("LEFT"));
        document.getElementById("LEFT").addEventListener("mouseup", _ => onRelease("LEFT"));

        document.getElementById("RIGHT").addEventListener("mousedown", _ => onPress("RIGHT"));
        document.getElementById("RIGHT").addEventListener("mouseup", _ => onRelease("RIGHT"));

        document.getElementById("UP").addEventListener("mousedown", _ => onPress("UP"));
        document.getElementById("UP").addEventListener("mouseup", _ => onRelease("UP"));

        document.getElementById("DOWN").addEventListener("mousedown", _ => onPress("DOWN"));
        document.getElementById("DOWN").addEventListener("mouseup", _ => onRelease("DOWN"));

    };

    // configuration
    var opts = {
        romReaders: [ romAjaxReader ],
        pad: {class: Keyboard, mapping: null},
    };

    var g = new GameboyJS.Gameboy(document.getElementById('canvas'), opts);
    g.setSoundEnabled(false);
    g.setScreenZoom(1);

    romAjaxReader.loadFromUrl('pokered.gbc');
</script>

</body>
</html>
